<h1>Finalizar Pedido</h1>

<p><strong>Produto:</strong> <%= @food.name %></p>
<p><strong>Preço:</strong> R$ <%= number_to_currency(@food.price) %></p>

<%= form_with model: @order, url: orders_path(food_id: @food.id) do |f| %>
  <div>
    <%= f.label :pickup_address_id, "Endereço de Coleta" %>
    <%= f.collection_select :pickup_address_id, @restaurant_addresses, :id,
      ->(a) { "#{a.street}, #{a.number} - #{a.neighborhood}" }, prompt: "Selecione" %>
  </div>

  <div>
    <%= f.label :delivery_address_id, "Endereço de Entrega" %>
    <%= f.collection_select :delivery_address_id, @client_addresses, :id,
      ->(a) { "#{a.street}, #{a.number} - #{a.neighborhood}" }, prompt: "Selecione" %>
  </div>

  <div>
    <%= f.label :payment_method, "Método de Pagamento" %>
    <%= f.select :payment_method, Order.payment_methods.keys.map { |m| [m.titleize, m] }, prompt: "Selecione" %>
  </div>

  <%= f.submit "Finalizar Pedido" %>
<% end %>
