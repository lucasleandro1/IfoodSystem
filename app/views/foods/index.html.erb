<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><%= current_user.restaurant? ? "Minhas Comidas" : "Todas as Comidas" %></h1>
        <% if current_user.restaurant? %>
          <%= link_to new_food_path, class: "btn btn-success" do %>
            <i class="fas fa-plus me-2"></i>Nova Comida
          <% end %>
        <% end %>
      </div>

      <% if current_user.present? %>
        <% if @foods.any? %>
          <div class="row">
            <% @foods.each do |food| %>
              <div class="col-md-6 col-lg-4 col-xl-3 mb-4">
                <div class="card food-card h-100">
                  <div class="card-body d-flex flex-column">
                    <h5 class="card-title text-primary"><%= food.name %></h5>
                    <% unless current_user.restaurant? %>
                      <p class="card-text text-muted small mb-2">
                        <i class="fas fa-store"></i> 
                        <strong><%= food.user.email.split('@').first.humanize %></strong>
                      </p>
                    <% end %>
                    <p class="card-text mb-3 flex-grow-1">
                      <%= truncate(food.description, length: 100) %>
                    </p>
                    <div class="d-flex justify-content-between align-items-center mt-auto">
                      <span class="price-tag">
                        R$ <%= number_to_currency(food.price, unit: "", precision: 2) %>
                      </span>
                      <div class="btn-group" role="group">
                        <% if current_user.restaurant? %>
                          <%= link_to edit_food_path(food), class: "btn btn-outline-warning btn-sm" do %>
                            <i class="fas fa-edit"></i>
                          <% end %>
                          <%= button_to food_path(food), method: :delete, 
                                       class: "btn btn-outline-danger btn-sm", 
                                       data: { confirm: "Tem certeza que deseja excluir?" },
                                       form: { style: "display: inline-block;" } do %>
                            <i class="fas fa-trash"></i>
                          <% end %>
                        <% else %>
                          <%= link_to food_path(food), class: "btn btn-outline-info btn-sm me-1" do %>
                            <i class="fas fa-eye"></i>
                          <% end %>
                          <%= link_to new_order_path(food_id: food.id), class: "btn btn-success btn-sm" do %>
                            <i class="fas fa-shopping-cart"></i>
                          <% end %>
                        <% end %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        <% else %>
          <div class="text-center py-5">
            <div class="mb-4">
              <i class="fas fa-utensils fa-4x text-muted"></i>
            </div>
            <h3 class="text-muted mb-3">
              <%= current_user.restaurant? ? "Nenhuma comida cadastrada" : "Nenhuma comida disponível" %>
            </h3>
            <p class="text-muted mb-4">
              <%= current_user.restaurant? ? "Cadastre sua primeira comida para começar a vender." : "Nenhum restaurante cadastrou comidas ainda." %>
            </p>
            <% if current_user.restaurant? %>
              <%= link_to new_food_path, class: "btn btn-primary" do %>
                <i class="fas fa-plus me-2"></i>Cadastrar primeira comida
              <% end %>
            <% end %>
          </div>
        <% end %>
      <% else %>
        <div class="text-center py-5">
          <h3 class="text-muted">Faça login para ver as comidas disponíveis</h3>
        </div>
      <% end %>
    </div>
  </div>
</div>
